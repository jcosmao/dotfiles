#!/bin/bash

if [[ $(basename $0) == 'o_tail_less_symlink' ]]; then
    echo "This script need to be called from otail / oless symlink"
    exit 1
fi

files=$*
if [[ -z $files ]]; then
    echo "$0 <file(s)> <openstack_log_colorizer options>"
    exit 1
else
    for f in $files; do
        if [[ -f $f ]]; then
            os_file="$os_file $f"
            shift
        fi
    done
fi

options=$*

[[ $(basename $0) == 'otail' ]] && tail -F $os_file | ~/.local/bin/openstack_log_colorizer $options
[[ $(basename $0) == 'oless' ]] && cat $os_file | ~/.local/bin/openstack_log_colorizer $options | less -R
